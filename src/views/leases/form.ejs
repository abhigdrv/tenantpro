<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head') %>
    <title><%= title %></title>
</head>
<body>
    <%- include('../partials/header') %>
    <main>
        <%- include('../partials/sidebar') %>
        <section class="content">
            <h2><%= title %></h2>
            <form action="/leases/<%= lease ? lease.id + '/edit' : '' %>" method="POST">
                <div class="form-group">
                    <label for="tenantId">Tenant:</label>
                    <select name="tenantId" id="tenantId" required>
                        <% tenants.forEach(tenant => { %>
                            <option value="<%= tenant.id %>" <%= lease && lease.tenantId === tenant.id ? 'selected' : '' %>>
                                <%= tenant.firstName %> <%= tenant.lastName %>
                            </option>
                        <% }); %>
                    </select>
                </div>
                <div class="form-group">
                    <label for="roomId">Room:</label>
                    <select name="roomId" id="roomId" required>
                        <% rooms.forEach(room => { %>
                            <option value="<%= room.id %>" <%= lease && lease.roomId === room.id ? 'selected' : '' %>>
                                Room <%= room.roomNumber %> (<%= room.status %>)
                            </option>
                        <% }); %>
                    </select>
                </div>
                <div class="form-group">
                    <label for="startDate">Start Date:</label>
                    <input type="date" name="startDate" id="startDate" value="<%= lease ? lease.startDate.toISOString().split('T')[0] : '' %>" required>
                </div>
                <div class="form-group">
                    <label for="endDate">End Date:</label>
                    <input type="date" name="endDate" id="endDate" value="<%= lease ? lease.endDate.toISOString().split('T')[0] : '' %>" required>
                </div>
                <div class="form-group">
                    <label for="rentAmount">Rent Amount:</label>
                    <input type="number" step="0.01" name="rentAmount" id="rentAmount" value="<%= lease ? lease.rentAmount : '' %>" required>
                </div>
                <div class="form-group">
                    <label for="depositPaid">Deposit Paid:</label>
                    <input type="number" step="0.01" name="depositPaid" id="depositPaid" value="<%= lease ? lease.depositPaid : '' %>">
                </div>
                <button type="submit" class="btn">Save Lease</button>
            </form>
        </section>
    </main>
    <%- include('../partials/footer') %>
</body>
</html>